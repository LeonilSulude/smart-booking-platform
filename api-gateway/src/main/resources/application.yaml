server:
  port: 8080

spring:
  application:
    name: api-gateway

  cloud:
    gateway:
      server:
        webflux:
          discovery:
            locator:
              enabled: true              # Automatically route based on Eureka service names
              lower-case-service-id: true
          routes:
            - id: catalog-service        # Route to the Catalog Service
              uri: lb://catalog-service
              predicates:
                - Path=/api/offers/**, /api/resources/**

            - id: booking-service        # Route to the Booking Service
              uri: lb://booking-service
              predicates:
                - Path=/api/bookings/**

            - id: auth-service           # Route to the Auth Service
              uri: lb://auth-service
              predicates:
                - Path=/api/auth/**

# TEMPORARY: JWT secret hardcoded as fallback (if needed)
security:
  user:
    name: none
    password: none
  basic:
    enabled: false

  jwt:
    secret: uma-super-secret-key-com-pelo-menos-32-caracteres

#  Vault config temporarily removed
#   cloud:
#     vault:
#       uri: http://127.0.0.1:8200
#       token: ${VAULT_TOKEN}
#       authentication: TOKEN
#       kv:
#         enabled: true
#         backend: secret
#         default-context: security

eureka:
  client:
    service-url:
      defaultZone: http://localhost:8761/eureka

